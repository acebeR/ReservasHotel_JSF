<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
	<title>Cadastro Pessoas</title>
	<style>
		@IMPORT url("estilo.css")
	</style>
</h:head>
<h:body>
	<h1>Cadastro Pessoas</h1>
	<h:messages styleClass="erro"/>
	<h:form>
		<label>
			Nome: <h:inputText id="nome" value="#{cadastroPessoasBean.pessoaSelecionada.nome}" />
		</label>
		<br/>
		<label>
			Email: <h:inputText id="email" validatorMessage="Email Inv치lido" value="#{cadastroPessoasBean.pessoaSelecionada.email}">
				<f:validateRegex pattern=".+@.+"/>
				<h:message for="email" styleClass="erro"/>
			</h:inputText>
		</label>
		<br/>
		<label>
			Telefone: <h:inputText id="telefone"   value="#{cadastroPessoasBean.pessoaSelecionada.telefone}"/>
		</label>
		<br/>
		<label>
			CPF: <h:inputText id="cpf" validatorMessage="CPF Inv치lido" value="#{cadastroPessoasBean.pessoaSelecionada.cpf}">
				<f:validateRegex pattern="\d{3}(\.\d{3}){2}-\d{2}"/>
				<h:message for="cpf" styleClass="erro"/>
			</h:inputText>
		</label>
		<br/>
		<label>
			Data de Nascimento: <h:inputText validatorMessage="Data Inv치lido - 02/02/2019" converterMessage="Data Inv치lido - 02/02/2019" id="data" value="#{cadastroPessoasBean.pessoaSelecionada.dataNascimento}">
				<f:validateRegex pattern="dd/MM/yyyy"/>
				<h:message for="data" styleClass="erro"/>
			</h:inputText>
		</label>
		<br/>
		<h:commandButton action="#{cadastroPessoasBean.salvar}" value="Salvar" />
		<h:commandButton action="#{cadastroPessoasBean.cancelar}" value="Cancelar" />
		<br/>
		
		<h2>Lista de Pessoas Cadastradas</h2>
		<h:dataTable value="#{cadastroPessoasBean.lista}" var="p" rowClasses="linha1,linha2">
			<h:column>
				<f:facet name="header">Nome</f:facet>
				#{p.nome}
			</h:column>
			<h:column>
				<f:facet name="header">Email</f:facet>
				#{p.email}
			</h:column>
			<h:column>
				<f:facet name="header">Telefone</f:facet>
				#{p.telefone}
			</h:column>
			<h:column>
				<f:facet name="header">Acao</f:facet>
				<h:commandLink value="Editar"> 
					  <f:setPropertyActionListener value="#{p}" target="#{cadastroPessoasBean.pessoaSelecionada}"/>
				</h:commandLink> |
				<h:commandLink  value="Excluir" action="#{cadastroPessoasBean.excluir}"> 
					  <f:setPropertyActionListener value="#{p}" target="#{cadastroPessoasBean.pessoaSelecionada}"/>
				</h:commandLink> 
			</h:column>
		</h:dataTable>
	</h:form>
	
</h:body>
</html>